
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Claudson Oliveira</title>
  <meta name="author" content="Claudson Oliveira">

  
  <meta name="description" content="São Paulo é uma cidade que fala com a gente. Passamos por manifestações com pressa, sempre atrasados.
Já faz alguns meses que venho colecionando &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://cloudson.github.io/blog/page/2">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Claudson Oliveira" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-17973396-3']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner"><hgroup>
  <h1><a href="/">Claudson Oliveira</a></h1>
  
    <h2>Ediscere, Scire, Agere, Vincere.</h2>
  
</hgroup>
       
</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
   <li><a href="http://github.com/cloudson" target="_blank"><img src="/images/github.png" width="20px"/></a></li>
   <li><a href="http://twitter.com/cloudson" target="_blank"><img src="/images/bird_32_gray.png" width="24px"/></a></li>
   <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS"><img src="/images/rss.png" width="20px"/></a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:cloudson.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/about">Sobre</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2014/08/11/olhar-urbano-01/">Olhar Urbano 01</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-11T23:08:00-03:00" pubdate data-updated="true">Aug 11<span>th</span>, 2014</time>
        
         | <a href="/2014/08/11/olhar-urbano-01/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>São Paulo é uma cidade que fala com a gente. Passamos por manifestações com pressa, sempre atrasados.
Já faz alguns meses que venho colecionando imagens da cidade, muitas vezes de paredes pintadas. Resolvi exibi-las aqui no blog
aos poucos.</p>

<p><img src="/images/olharurbano/01.jpg" alt="" /></p>

<p>Essa imagem mostra uma crítica forte sobre as pichações da cidade. Enquanto todos afirmam que 1 + 1 = 3, apenas o pichação diz a verdade, uma verdade não
aceita e julgada.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2014/04/23/gitql-do-que-e-feito/">Gitql - Do Que é Feito?</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-04-23T09:02:00-03:00" pubdate data-updated="true">Apr 23<span>rd</span>, 2014</time>
        
         | <a href="/2014/04/23/gitql-do-que-e-feito/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>No começo do ano, um projeto bem legal apareceu no github, o <a href="https://github.com/dinedal/textql">textql</a>. Aquilo me fez pensar novamente &ldquo;Como não tive essa ideia?&rdquo;; Baseado num texto csv, poder fazer consultas sql. Simplesmente incrível.<br/>
Depois de dar uma olhada no projeto, voltei ao trabalho; códigos, git status, git commit, git log &hellip; &ldquo;Hey! Todo mundo sabe sql, mas nem todo mundo sabe git log&rdquo;, e daí pensei em criar o <a href="https://github.com/cloudson/gitql">gitql</a>, uma forma fácil de extrair informações de repositórios git usando uma linguagem de consulta.</p>

<h3>Desafios</h3>

<p>Olhei um pouco mais de perto o que o textql fazia. Como seu objetivo era ler um arquivo aparentemente imutável, a ferramenta primeiramente criava um banco sqlite e importava todos os dados para uma tabela. &ldquo;Não bom&rdquo; para meu caso. Repositórios git mudam a todo momento, uma suposta tabela de commits não iria parar de crescer. Ter um banco sqlite para cada repositório e sincronizá-lo antes de cada consulta estava fora de cogitação.<br/>
O que eu queria realmente era transformar o commando <code>select * from commits</code> em <code>git log</code>, ou seja, traduzir uma linguagem em outra.
Além disso, percebi que era uma boa hora para estudar &ndash; na prática &ndash; uma linguagem emergente; <a href="http://golang.org/">golang</a>.</p>

<h3>Enfrentando o terceiro dragão</h3>

<p>Para quem me conhece desde a época (não tão distante) da faculdade, sabe que sou um pouco viciado em Teoria de compiladores, linguagens e outras coisas malucas. É uma área meio conturbadora, tanto que um compilador acaba tendo um <a href="http://www.amazon.com/Compilers-Principles-Techniques-Tools-Edition/dp/0321486811">dragão</a> como símbolo. Mas como eu (junto a amigos) já tinha feito um <a href="https://github.com/cloudson/Bocejo">compilador de mini-java para assembly mips</a>, e um tcc que tinha um <a href="http://www.gcg.ufjf.br/cloudblocks/">interpretador de C para javascript</a>, toda a teoria ainda estava na minha cabeça (em algum lugar).</p>

<h3>Definindo a linguagem</h3>

<p>Gitql é somente leitura, então o interpretador acabaria rodando apenas comandos select, escrevi alguns exemplos úteis, como objetivo final.</p>

<p><code>select * from commits</code><br/>
<code>select author, message where (date &gt;= '2014-04-10' and date &lt; '2014-04-11') and (author = 'cloudson' or author = 'jeanpimentel')</code>
<code>select author, message where 'Fuck' in full_message</code>
&hellip;</p>

<p>Alguns casos eram tão específicos que eu mesmo não conseguiria gerar um git log com tal informação, o que me animava.
Definida as palavras chaves (ficaram de fora coisas como joins, alias e  group by), era hora de implementar as fases do compilador que tinham como objetivo gerar a <a href="http://en.wikipedia.org/wiki/Abstract_syntax_tree">AST</a>.</p>

<h3>Como a coisa funciona mais abaixo?</h3>

<p><strong>select author from commits</strong><br/>
Por padrão temos um limite de 10 linhas, então o que fazemos é percorrer pelos últimos commits (utilizando <a href="https://github.com/libgit2/">libgit2</a>) e quando tivermos 10 sucessos, paramos. A cada sucesso guardamos author, que é <a href="https://github.com/cloudson/gitql/blob/64ab944ad750a6da26456136f9c40b2a616534f8/runtime/runtime.go#L344">transcrito para objeto commit.Author.Name</a>.</p>

<p><strong>select hash from commits where author = &lsquo;cloudson&rsquo; or author = &lsquo;jeanpimentel&rsquo;</strong>  <br/>
A heurística é a mesma mas vamos agora observar o que é um <strong>sucesso</strong>. Percorrendo os commits procuramos aqueles que casam complementamente com o where, ou seja, um sucesso é um commit que possui um dos dois autores.</p>

<p><strong> select message from commits order by date asc limit 2 </strong><br/>
Neste caso queremos os 2 primeiros commits de um repositório. Qual o problema deste exemplo? A princípio eu não tenho uma coleção de commits alocada em memória, tudo que vimos até agora é um algoritmo que vai montando uma coleção a medida que encontra sucessos. Isso nos dá uma limitação, a forma para resolver essa consulta seria <br/>
1º) Encontrando <strong>todas</strong> as mensagens de commits com sucesso.<br/>
2º) Ordenando essas mensagens (poderia ser por nome de author).<br/>
3º) Pegando apenas as 2 primeiras linhas.</p>

<p>Isso faz com que o algoritmo se torne menos eficiente (no tempo e no espaço) é o que tentei relatar na <a href="https://github.com/cloudson/gitql/issues/4">issue #4</a>.
Aparentemente não há outra forma, para que o order by funcione perfeitamente.</p>

<h3>Conclusão</h3>

<p>Valeu a pena todos os commits de madrugada para tentar finalizar a ferramenta, e também por estudar mais go, fazia tempos que eu não achava uma linguagem tão divertida. <br/>
Também é <del>du caralho</del> gratificante receber 500 stars por uma ideia maluca. Divulgando no <a href="https://twitter.com/cloudson/status/455886564787519488">twitter</a> e no <a href="http://www.reddit.com/r/golang/comments/2334ys/gitql_a_git_query_language_built_with_golang/">reddit</a> gerou-se um movimento inesperado de <a href="https://twitter.com/search?q=gitql&amp;src=typd&amp;f=realtime">pessoas</a> <a href="http://www.reddit.com/r/git/comments/234e8y/gitql_a_git_query_language/">interessadas</a> no <a href="http://ruby5.envylabs.com/episodes/494-episode-457-april-18th-2014">projeto</a>. Insano!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2014/03/15/mostrando-o-branch-atual-no-bash/">Mostrando O Branch Atual No Bash</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-15T22:19:00-03:00" pubdate data-updated="true">Mar 15<span>th</span>, 2014</time>
        
         | <a href="/2014/03/15/mostrando-o-branch-atual-no-bash/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Quando estamos num console unix vemos uma área fixa que informa &ndash; geralmente &ndash; o usuário, a máquina e o diretório em que estamos no momento.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>cloudson@Matrix:/var/www<span class="err">$</span>
</span></code></pre></td></tr></table></div></figure>


<p>Mas eu demorei um bocado para saber que dava para editar o padrão daquele área.<br/>
Existe uma váriavel PS1 relacionado a ele. Poderíamos setar</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">export </span><span class="nv">PS1</span><span class="o">=</span><span class="s2">&quot;\u:\w$&quot;</span>;
</span></code></pre></td></tr></table></div></figure>


<p>Isso irá exibir <code>cloudson:/var/www$</code> pois \u ser refere ao usuário e \w ap diretório atual. Podemos usar várias outras varáveis pra compor a informação:</p>

<table>
<thead>
<tr>
<th>Caractere  </th>
<th>  Uso</th>
</tr>
</thead>
<tbody>
<tr>
<td>\d  </td>
<td>  Data, no formato &ldquo;DiaDaSemana Mês Dia&rdquo; (exe; &ldquo;Tue May 26&rdquo;).   </td>
</tr>
<tr>
<td>\h  </td>
<td>  O nome do host. (exe; Matrix)   </td>
</tr>
<tr>
<td>\j  </td>
<td>  O número de jobs atualmente rodando via shell. </td>
</tr>
<tr>
<td>\t  </td>
<td>  Tempo, no formato de 24 horas HH:MM:SS . </td>
</tr>
<tr>
<td>\T  </td>
<td>  Tempo,  no formato de 12 horas HH:MM:SS . </td>
</tr>
<tr>
<td>\@  </td>
<td>  Tempo, no formato 12 horas am/pm. </td>
</tr>
<tr>
<td>\u  </td>
<td>  O nome do usuário atual. </td>
</tr>
<tr>
<td>\v  </td>
<td>  A versão do Bash (ex; 2.00) </td>
</tr>
<tr>
<td>\w  </td>
<td>  A atual diretório. </td>
</tr>
<tr>
<td>\W  </td>
<td>  O nome base do $PWD. </td>
</tr>
<tr>
<td>!  </td>
<td>  O número histórico desse comando. </td>
</tr>
<tr>
<td>\$  </td>
<td> Se você não for root, insere um &ldquo;$&rdquo;; se for root, você terá um &ldquo;#&rdquo; .</td>
</tr>
<tr>
<td>\n  </td>
<td> Uma quebra de linha.  </td>
</tr>
<tr>
<td>\e  </td>
<td> An escape character.   </td>
</tr>
</tbody>
</table>


<p>Um exemplo útil seria exibir em qual branch estamos, caso possível.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">export </span><span class="nv">PS1</span><span class="o">=</span><span class="s2">&quot;\u@\h:\w$(git branch 2&gt;/dev/null | grep &#39;^*&#39;)$ &quot;</span>;
</span></code></pre></td></tr></table></div></figure>


<p>E é isso! Agora não há perigo de estar num branch errado e só perceber tarde :)</p>

<p>Referências:</p>

<ul>
<li><a href="http://ss64.com/bash/syntax-prompt.html">http://ss64.com/bash/syntax-prompt.html</a></li>
<li><a href="http://tldp.org/HOWTO/Bash-Prompt-HOWTO/x329.html">http://tldp.org/HOWTO/Bash-Prompt-HOWTO/x329.html</a></li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2014/03/09/phartitura-um-novo-modo-de-observar-suas-dependencias-em-php/">Phartitura - Um Novo Modo De Observar Suas Dependências Em Php</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-09T23:30:00-03:00" pubdate data-updated="true">Mar 9<span>th</span>, 2014</time>
        
         | <a href="/2014/03/09/phartitura-um-novo-modo-de-observar-suas-dependencias-em-php/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Hi guys! Neste post vou falar um pouco sobre o projeto que codei nas últimas semanas, <a href="http://phartitura.com">o Phartitura</a>.</p>

<h3>Inspiração!</h3>

<p>O twitter virou uma grande fonte de links técnicos para mim, e por lá, vi alguém postando um site para comunidade node-js. O <a href="http://david-dm.org/">David-www</a>. Foi naquele momento que eu pensei &ldquo;cara, não tem isso pro composer!&rdquo;.
O David era uma aplicação/website que mostrava todas as dependências de um projeto hospedado no npm (gerenciador de dependências node-js), citando a versão mais atual e a versão que um projeto x usaria. Dessa forma ficaria fácil ver a distância entre as versões.</p>

<h3>A ilusão; &ldquo;Parece simples!&rdquo;</h3>

<p>Aparentemente parecia mamão com açúcar, eu precisava seguir um roteiro simples:</p>

<p>1) Consumir metadados de um projeto A/B do packagist  <br/>
   &ndash; Com alguma pesquisa percebi que o <a href="http://cloudson.github.io/2014/01/25/acessando-a-api-do-packagist/">packagist possuia uma interface para isso</a>.<br/>
2) Pegar uma dependência C/D e olhar para sua regra de versão  <br/>
   &ndash; Se C/D tem regra ~1.1, quer dizer que o composer vai baixar uma versão >=1.1.0 e &lt;1.2.0. <br/>
3) Definir qual a versão mais atual de C/D que casa com a regra.<br/>
4) Definir qual a versão mais atual (de todasss) de C/D. <br/>
5) Voltar pro passo 2 com outra dependência.</p>

<p>Implementar esse <em>Versioning Resolver</em> não era um dos casos mais simples porque o composer trabalha com muitos tipos de regras de versão (muitos um pouco distante do <a href="http://semver.org">semver</a> comum). Exemplos abaixo:</p>

<ul>
<li>~1.0</li>
<li>2.0.3-alpha</li>
<li>3.2.2-beta8</li>
<li>>2.0,&lt;=4.0.2</li>
<li>&lt;3.0.0 | > 5.0.3a</li>
<li>6.6.*</li>
<li>dev-master<br/>
&hellip;</li>
</ul>


<p>Eu poderia (e pesquisei sobre) usar uma biblioteca pronta que me respondesse a questão &ldquo;Eu tenho 3 versões, qual deleas é a mais nova que casa com a regra x?&rdquo;. O Mais perto disso que eu conseguiria, era usar o próprio composer/composer. Mas seria uma <em>library</em> muito grande para ter como dependência do phartitura, então decidi escrever eu mesmo esse <em>Resolver</em>! #facaNaCaveira.</p>

<h3>Desafios, desafios&hellip;</h3>

<p>Além disso, existiam outros &ldquo;problemas&rdquo;:</p>

<h4>Gargalo no curl/tempo de request</h4>

<p>O exemplo mais claro e querido é o <a href="http://phartitura.com/symfony/symfony">symfony/symfony</a>.
Quando você tenta ver uma phartitura do projeto, a aplicação vai pegar os metadados disponíveis pelo packagist deste projeto (ou seja, vai realizar aquele passo 1). Esses metadados vêm como json, vamos dar uma olhada na seção que nos interessa, as dependências:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
</pre></td><td class='code'><pre><code class='json'><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="nt">&quot;require&quot;</span><span class="p">:{</span>
</span><span class='line'>       <span class="nt">&quot;php&quot;</span><span class="p">:</span><span class="s2">&quot;&gt;=5.3.3&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/icu&quot;</span><span class="p">:</span><span class="s2">&quot;~1.0&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;doctrine\/common&quot;</span><span class="p">:</span><span class="s2">&quot;~2.2&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;twig\/twig&quot;</span><span class="p">:</span><span class="s2">&quot;~1.11&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;psr\/log&quot;</span><span class="p">:</span><span class="s2">&quot;~1.0&quot;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nt">&quot;require-dev&quot;</span><span class="p">:{</span>
</span><span class='line'>       <span class="nt">&quot;doctrine\/data-fixtures&quot;</span><span class="p">:</span><span class="s2">&quot;1.0.*&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;doctrine\/dbal&quot;</span><span class="p">:</span><span class="s2">&quot;~2.2&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;doctrine\/orm&quot;</span><span class="p">:</span><span class="s2">&quot;~2.2,&gt;=2.2.3&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;monolog\/monolog&quot;</span><span class="p">:</span><span class="s2">&quot;~1.3&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;propel\/propel1&quot;</span><span class="p">:</span><span class="s2">&quot;1.6.*&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;ircmaxell\/password-compat&quot;</span><span class="p">:</span><span class="s2">&quot;1.0.*&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;ocramius\/proxy-manager&quot;</span><span class="p">:</span><span class="s2">&quot;&gt;=0.3.1,&lt;0.4-dev&quot;</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="nt">&quot;replace&quot;</span><span class="p">:{</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/browser-kit&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/class-loader&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/config&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/console&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/css-selector&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/dependency-injection&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/debug&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/doctrine-bridge&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/dom-crawler&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/event-dispatcher&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/filesystem&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/finder&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/form&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/framework-bundle&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/http-foundation&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/http-kernel&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/intl&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/locale&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/monolog-bridge&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/options-resolver&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/process&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/propel1-bridge&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/property-access&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/proxy-manager-bridge&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/routing&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/security&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/security-bundle&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/serializer&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/stopwatch&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/swiftmailer-bridge&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/templating&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/translation&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/twig-bridge&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/twig-bundle&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/validator&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/web-profiler-bundle&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span><span class="p">,</span>
</span><span class='line'>       <span class="nt">&quot;symfony\/yaml&quot;</span><span class="p">:</span><span class="s2">&quot;self.version&quot;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'> <span class="p">}</span><span class="err">,</span>
</span></code></pre></td></tr></table></div></figure>


<p>As informações são bem parecidas com um composer.json, então para descobrir dados de cada dependência, é preciso fazer várias novas requests pro packagist perguntando sobre cada uma dessas. Entendeu o problema com o Symfony? São MUITAS dependências. <br/>
Como seria insano forçar todos os usuários a esperar essas trocentas requests com CURL, serializei a informação no Redis com TTL de algumas horas, isso torna um segundo pedido para symfony/symfony incrivelmente rápido mas acaba não dando uma visão exata do pacote. Por exemplo, se neste exato momento o symfony está cacheado no Phartitura, e no github sair um novo release, levará horas para que a informação mude. Abri uma <a href="https://github.com/cloudson/Phartitura/issues/4">issue</a> para criar um console job (provavelmente com <a href="http://symfony.com/doc/current/components/console/introduction.html">symfony/console</a>) que atualiza esses caras automaticamente.</p>

<h4>Priorizando as versões</h4>

<p>Outro problema divertido foi/é responder a pergunta &ldquo;Como eu sei qual a versão mais atual entre X,Y e Z?&rdquo;. Você pode pensar rapidamente, o timestamp de release da tag/versão responde isso mas &hellip; <br/>
* A versão dev-master sempre é encontrada (e não pode ser descartada, já que alguns projetos apontam pra ela &ndash; tsc tsc tsc) <br/>
* A versão dev-develop também é sempre encontrada e pode estar à frente de tags<br/>
* Alguns projetos (Como o Symfony) mantêm duas ou mais versões   simultaneamente, então um release para a 2.3.4 pode vir depois de um release para a 2.4.1 :(  <br/>
* Algumas pessoas versionam com umas tags %$@#!% 1.0.0-alpha8 (o composer por exemplo ¬¬). Cara, o mundo inteiro está usando algo alpha há mais de dois anos? Para mim o composer está na versão 1.0.x</p>

<p>Implementei uma <a href="http://www.php.net/manual/en/class.splmaxheap.php">SplMaxHeap</a> para que a medida que eu fosse inserindo versões nessa pilha, ele ordenasse deixando a mais prioritária no topo. A classe atual está com problemas (como aquele citado sobre o symfony) e é encontrada <a href="https://github.com/cloudson/Phartitura/blob/master/src/Cloudson/Phartitura/Project/VersionHeap.php">aqui</a>.</p>

<h4>Negociação de conteúdo com Respect/Rest</h4>

<p>Foi um bom momento para estudar um pouco sobre HTTP/REST. Com a ferramenta brasileira, <a href="https://github.com/respect/rest#content-negotiation">foi muito simples dar o primeiro passo</a> para a tarefa
<code>Se alguém quiser consumir os dados de um projeto como json, retorne como json</code>.</p>

<p>Mas depois a situação foi ficando um pouco mais complicada. Geralmente as pessoas não usam cabeçalho http para negociar contéudo com serviços, elas usam a própria url. Então para a url <a href="http://phartitura.com/cloudson/gandalf">http://phartitura.com/cloudson/gandalf</a> eu criei uma rota <a href="http://phartitura.com/cloudson/gandalf.json">http://phartitura.com/cloudson/gandalf.json</a> . Acho que encontrei um problema na priorização das rotas do Respect/Rest:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Router</span><span class="p">;</span>
</span><span class='line'><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/*/*.json&#39;</span><span class="p">,</span> <span class="nv">$jsonCallback</span><span class="p">);</span>
</span><span class='line'><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/*/*&#39;</span><span class="p">,</span> <span class="nv">$htmlCallback</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Setando essas duas rotas, a ferramenta não sabe qual é a mais prioritária, escolhendo a segunda :( Provavelmente eu vá abrir uma issue daqui a uns dias, ou você mesmo pode fazer isso. <br/>
As prioridades são dadas pelo número de <em>wild cards</em>, então resolvi da seguinte forma :</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="nv">$app</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Router</span><span class="p">;</span>
</span><span class='line'><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/*/*.json&#39;</span><span class="p">,</span> <span class="nv">$jsonCallback</span><span class="p">);</span>
</span><span class='line'><span class="nv">$app</span><span class="o">-&gt;</span><span class="na">get</span><span class="p">(</span><span class="s1">&#39;/*/**&#39;</span><span class="p">,</span> <span class="nv">$htmlCallback</span><span class="p">);</span> <span class="c1">// três *</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Conclusão</h3>

<p>Foi um projeto bem legal e desafiador. Prova que qualquer &ldquo;escritor de códigos&rdquo; pode lançar algo a nível mundial, pois apesar do maior número de acessos vir do brasil, Phartitura teve acessos de EUA, Inglaterra, Alemanha, Canada, Índia, Austrália, Japão&hellip; são 39 países nesse momento.<br/>
Sobre o futuro, há muito a se implementar, quero fazer análise para projetos privados (subindo o composer.json), refatorar código, aumentar a cobertura de testes, criar jobs que atualizem informações no phartitura automaticamente, envio de notificação sobre novos releases para usuários que assim quiserem&hellip;
Enfim, o céu é o limite! Fiquem com a música tema do projeto</p>

<iframe width="420" height="315" src="//www.youtube.com/embed/k1-TrAvp_xs" frameborder="0" allowfullscreen></iframe>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/2014/02/15/programacao-funcional-em-php/">Programação Funcional Em PHP</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-02-15T20:01:00-02:00" pubdate data-updated="true">Feb 15<span>th</span>, 2014</time>
        
         | <a href="/2014/02/15/programacao-funcional-em-php/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Hey guys! Hoje falaremos um pouco sobre as características de uma linguagem funcional encontradas no PHP. Citando um pouco as limitações da linguagem e o que ganhamos com o paradigma.</p>

<h3>Introdução</h3>

<p>O que faz de uma linguagem funcional ou não?<br/>
A principal característica é afirmar que uma função está no mesmo &ldquo;nível que um tipo de dado&rdquo;, ou seja, você consegue declarar uma variável do tipo função. Por quê isso? Para que você consiga encapsular blocos de código em uma variável e executá-lo em locais específicos.
Complicado? Vamos tentar resolver o seguinte problema:</p>

<p><code>Você possui o array de entrada $a de strins, faça um algoritmo que retorne o mesmo array com cada elemento sem os espaços iniciais e finais (trim) e com a primeira letra em maiúscula.</code></p>

<p>No php 5.2 (já) existiam funções para percorrer arrays aplicando (outras) funções em cada elemento, uma delas é o <a href="http://www.php.net/manual/pt_BR/function.array-walk.php">array_walk</a>.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'>    <span class="nb">array_walk</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="s1">&#39;trim&#39;</span><span class="p">);</span>
</span><span class='line'>    <span class="nb">array_walk</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="s1">&#39;ucfirst&#39;</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Veja as linhas acima. A função array_walk recebe dois parâmetros, o primeiro é array que sofrerá as modificações, e o segundo é a função que será aplicada em cada elemento do array. Legal neh? Mas meio arcaico, isso não tem muito a ver com linguagens funcionais, foi só o jeito arcaico do php resolver isso (Opinão!!!!!! hahah).
Vamos agora tornar o problema um pouco mais complexo:</p>

<p><code>Você ainda possui o array $a de entrada, e precisa aplicar uma certa operação em cada elemento do array. Se esse elemento for uma string sem espaços, você precisa deixá-la no padrão CamelCase (primeira letra maiúscula, no caso), senão no padrão hifenado (caixa baixa e espaços tornam-se hífens)</code>.</p>

<p>A primeira solução que vem a sua mente, caso você não conheça programação funcional é</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'><span class="c1">// Esses comentários dizem exatamento o que o código faz, o que é no mínimo estranho</span>
</span><span class='line'><span class="c1">// mas caso alguém não tenha familiaridade com a queria api built-in do php</span>
</span><span class='line'><span class="c1">// eles ajudarão</span>
</span><span class='line'><span class="k">for</span> <span class="p">(</span><span class="nv">$a</span> <span class="k">as</span> <span class="o">&amp;</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="c1">// percorrer todo o vetor por referência (&amp;)</span>
</span><span class='line'>    <span class="nv">$value</span> <span class="o">=</span> <span class="nx">strtolower</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
</span><span class='line'>    <span class="nv">$value</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="k">false</span> <span class="o">!==</span> <span class="nb">strpos</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="nv">$value</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>        <span class="c1">// trocar espaços por hífens</span>
</span><span class='line'>        <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="nv">$value</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">continue</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="c1">// tornar a primeira letra maiúscula</span>
</span><span class='line'>    <span class="nv">$value</span> <span class="o">=</span> <span class="nx">ucfirst</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Vamos resolver agora funcionalmente, passando um bloco de código para uma função:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="o">&lt;?</span><span class="nx">php</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$apply</span> <span class="o">=</span> <span class="k">function</span> <span class="p">(</span><span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="nv">$value</span> <span class="o">=</span> <span class="nx">strtolower</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
</span><span class='line'>    <span class="nv">$value</span> <span class="o">=</span> <span class="nx">trim</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="k">false</span> <span class="o">!==</span> <span class="nb">strpos</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="nv">$value</span><span class="p">))</span> <span class="p">{</span>
</span><span class='line'>        <span class="nb">str_replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="nv">$value</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">continue</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="nv">$value</span> <span class="o">=</span> <span class="nx">ucfirst</span><span class="p">(</span><span class="nv">$value</span><span class="p">);</span>
</span><span class='line'><span class="p">};</span>
</span><span class='line'><span class="nb">array_walk</span><span class="p">(</span><span class="nv">$a</span><span class="p">,</span> <span class="nv">$apply</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Observe duas coisas, na linha 3, $apply recebeu uma FUNÇÃO como valor. Essa função sem nome obviamente é chamada de função anônima.
Se uma função é anônima, e essa variável guarda uma função, como executá-la?</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='php'><span class='line'><span class="nv">$apply</span><span class="p">(</span><span class="s1">&#39;Comunidade php de SP&#39;</span><span class="p">);</span> <span class="c1">// comunidade-php-de-sp</span>
</span></code></pre></td></tr></table></div></figure>


<p>Legal neh? :)</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/2014/11/18/olhar-urbano-02/">Olhar Urbano 02</a>
      </li>
    
      <li class="post">
        <a href="/2014/11/01/apis-uma-comparacao-com-websites/">API&#8217;s usando HAL - Uma comparação com websites</a>
      </li>
    
      <li class="post">
        <a href="/2014/10/15/ligando-extensoes-a-linguagens-no-vim/">Ligando extensões a linguagens no Vim</a>
      </li>
    
      <li class="post">
        <a href="/2014/09/06/streams-em-php/">Streams em PHP</a>
      </li>
    
      <li class="post">
        <a href="/2014/08/12/entendendo-uma-negociacao-de-conteudo-via-cartas/">HTTP - Entendendo uma negociação de conteúdo via cartas</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/cloudson">@cloudson</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'cloudson',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Claudson Oliveira -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'cloudsonblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>






<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>









</body>
</html>
